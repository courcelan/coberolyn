# karma for angularjs testing
options:
  frameworks: ['mocha']
  reporters: ['progress']
  browsers: ['PhantomJS']

test:
  options:
    browsers: ['Chrome']
    files: '<%= karma.unit.options.files %>'
    autoWatch: true      

unit:
  options:
    files:
      - '<%= src.vendor %>angular/angular.min.js'
      - '<%= src.vendor %>angular-mocks/angular-mocks.js'
      # - '<%= src.js %>vefa/**/*.coffee'
      - '<%= build.js %>models/data.js'
      - '<%= src.js %>app/**/*.coffee'
      - 'node_modules/chai/chai.js'
      - '<%= src.js %>test_lib/mocha.conf.js'
  background: true

unit_once:
  options:
    files: '<%= karma.unit.options.files %>'
  singleRun: true

e2e:
  options:
    browsers: ['Chrome', 'PhantomJS']
    frameworks: ['ng-scenario']
    files: ['<%= build.js %>test_lib/*.e2e.js']
    urlRoot: '/_karma_/'
    runnerport: 9999
  proxies:
    '/': 'http://localhost:<%= shell.port %>/'
  singleRun: true